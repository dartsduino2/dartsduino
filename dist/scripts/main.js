(function(){"use strict";var a;a=function(){function a(){var a,b,c;c=this.SOUNDS;for(a in c)b=c[a],this.audios[a]=new Audio,this.audios[a].src=this.SOUND_DIR+b.file}return a.prototype.SOUND_DIR="sounds/",a.prototype.SOUNDS={1:{file:"dl/hit.ogg"},2:{file:"dl/double.ogg"},3:{file:"dl/triple.ogg"},bull1:{file:"dl/bull-out.ogg"},bull2:{file:"dl/bull-in.ogg"},start:{file:"dl/start.ogg"},click:{file:"dl/click.ogg"},up:{file:"dl/up.ogg"},down:{file:"dl/down.ogg"},great:{file:"dl/great.ogg"},hiton:{file:"dl/hiton.ogg"},lowton:{file:"dl/lowton.ogg"},round:{file:"dl/round.ogg"},round2:{file:"dl/round2.ogg"},start2:{file:"35750_variety-darts-button.wav"},clap:{file:"35656_variety-clap.wav"}},a.prototype.DURATION=160,a.prototype.audios={},a.prototype.sequence=[],a.prototype.timer=null,a.prototype.play=function(a,b){var c;if(null!=this.audios[a]&&(this.doPlay(a),b>1))return b--,c=setInterval(function(d){return function(){return d.doPlay(a),b--,0===b?clearInterval(c):void 0}}(this),this.DURATION)},a.prototype.playSequence=function(a,b){return this.sequence.push({key:a,delay:b}),this.tickSequence()},a.prototype.tickSequence=function(){var a,b,c;if(0===this.sequence.length)return void(this.timer=null);if(null==this.timer)return c=this.sequence.shift(),b=c.key,a=c.delay,this.timer=setTimeout(function(a){return function(){return a.play(b),a.timer=null,a.tickSequence()}}(this),a)},a.prototype.doPlay=function(a){var b;return b=this.audios[a].cloneNode(!1),this.audios[a].currentTime=this.SOUNDS[a].delay||0,this.audios[a].play(),this.audios[a]=b},a}(),window.sound=new a}).call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(){this.onFinish=b(this.onFinish,this),this.changeState=b(this.changeState,this),this.cancel=b(this.cancel,this),this.select=b(this.select,this),this.start=b(this.start,this),this.onHit=b(this.onHit,this),this.resizeWindow(),$(window).resize(function(a){return function(){return a.resizeWindow()}}(this)),$("#start-button").click(this.start),$("#select-button").click(this.select),$("#cancel-button").click(this.cancel),this.dartsUi=document.querySelector("darts-ui"),this.dartsUi.addEventListener("hit",this.onHit),this.gameGroup=document.querySelector("game-group"),this.gameGroup.addEventListener("finish",this.onFinish)}var c,d;return d={NOT_STARTED:0,PLAYING:1},c={ENTER:13,UP:38,DOWN:40},a.prototype.state=d.NOT_STARTED,a.prototype.dartsUi=null,a.prototype.gameGroup=null,a.prototype.sound=null,a.prototype.onHit=function(){var a,b,c;return c=event.detail,a=c.point,b=c.ratio,window.sound.play("25"===a?"bull"+parseInt(b):b)},a.prototype.resizeWindow=function(){var a,b,c,d,e,f;return a=$("body").height(),c=$(".header").height()+11,b=$(".footer").height()+11,d=a-c-b-36,e=Math.min($("body").width(),d)-20,f=($(".container").width()-e)/2,$("darts-ui").attr("width",e).attr("height",e).css("margin-left",f)},a.prototype.start=function(){var a,b,d,e,f,g,h,i,j,k;for(window.sound.play("start2"),this.dartsUi.setAttribute("focuses"," "),this.gameGroup.removeAttribute("state"),e=this.gameGroup.getAttribute("games").split(","),d=$("#gameItems"),d.empty(),f=j=0,k=e.length;k>j;f=++j)b=e[f],a=0===f?'checked="checked"':"",h=$('<input type="radio" name="type" value="'+b+'" '+a+"> "+b+"<br>"),h.click(function(a){return function(){return a.sound.play("click")}}(this)),d.append(h);return $("#myModal").modal("show"),i=function(){return function(a){return $("#gameItems input")[a].checked=!0,window.sound.play("click")}}(this),g=0,$("#myModal").keydown(function(a){return function(b){switch(b.keyCode){case c.ENTER:return a.select();case c.UP:return g--,0>g&&(g=e.length-1),i(g);case c.DOWN:return g++,g>=e.length&&(g=0),i(g)}}}(this))},a.prototype.select=function(){var a,b,c,e,f,g;for(window.sound.play("start"),c=$("#gameItems input"),b=null,e=f=0,g=c.length;g>f;e=++f)a=c[e],a.checked&&(b=a.value);return this.gameGroup.setAttribute("state",b+",2"),$("#myModal").modal("hide"),this.changeState(d.PLAYING)},a.prototype.cancel=function(){return this.gameGroup.removeAttribute("state"),this.changeState(d.NOT_STARTED)},a.prototype.changeState=function(a){var b;switch(b=this.state,this.state=a,a){case d.NOT_STARTED:return $("#start-button").show(),$("#cancel-button").hide();case d.PLAYING:return $("#start-button").hide(),$("#cancel-button").show()}},a.prototype.onFinish=function(a){var b;if(this.state===d.PLAYING)return b=null!=a.detail.message?a.detail.message:null!=a.detail.player?""+a.detail.player.name+" の勝ち!":"引き分け",$("#message").text(b),$("#resultModal").modal("show"),window.sound.play("clap"),this.changeState(d.NOT_STARTED)},a}(),window.Game=a}.call(this),function(){"use strict";var a;a=new Game}.call(this);